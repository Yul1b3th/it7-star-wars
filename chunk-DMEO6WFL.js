import{B as S,N as h,O as p,a as g,b as d,c as t,d as u,e as c,l as P,ra as b,x as f}from"./chunk-4WTJQ336.js";var j=(()=>{var i,o,a;let n=class n{constructor(){u(this,i,void 0);u(this,o,void 0);u(this,a,void 0);this.http=S(b),c(this,i,p({count:1,nextPage:null,previousPage:null,starships:[],loading:!0,currentPage:1,selectedStarship:null})),c(this,o,p({selectedStarship:null})),c(this,a,p({starshipsList:[],transformResults:s=>this.transformStarshipstoStarship({results:s})})),this.count=h(()=>t(this,i).call(this).count),this.nextPage=h(()=>t(this,i).call(this).nextPage),this.previousPage=h(()=>t(this,i).call(this).previousPage),this.starships=h(()=>t(this,i).call(this).starships),this.loading=h(()=>t(this,i).call(this).loading),this.currentPage=h(()=>t(this,i).call(this).currentPage),this.selectedStarship=h(()=>t(this,i).call(this).selectedStarship),this.starshipsList=h(()=>t(this,a).call(this).transformResults(t(this,i).call(this).starships)),this.selectedStarshipDetails=h(()=>t(this,o).call(this).selectedStarship),this.currentPageNumber=1,this.http.get("https://swapi.dev/api/starships").subscribe(s=>{t(this,i).set({count:s.count,nextPage:s.next,previousPage:s.previous,starships:s.results,loading:!1,currentPage:t(this,i).call(this).currentPage+1,selectedStarship:t(this,i).call(this).selectedStarship})}),this.http.get("https://swapi.dev/api/starships").pipe(P(this.transformStarshipstoStarship)).subscribe(s=>{t(this,a).set({starshipsList:s,transformResults:r=>this.transformStarshipstoStarship({results:r})})})}getState(){return t(this,i).call(this)}loadStarshipsPage(s){this.http.get(s).subscribe(r=>{let e=t(this,a).call(this).transformResults(r.results);t(this,i).set(d(g({},t(this,i).call(this)),{count:r.count,nextPage:r.next,previousPage:r.previous,starships:r.results,loading:!1,currentPage:t(this,i).call(this).currentPage+1,selectedStarship:t(this,i).call(this).selectedStarship})),t(this,a).set(d(g({},t(this,a).call(this)),{starshipsList:e}))})}transformStarshipstoStarship(s){return s.results.map(e=>{let m=e.url.split("/")[5],v=`https://starwars-visualguide.com/assets/img/starships/${m}.jpg`;return{id:m,name:e.name,model:e.model,manufacturer:e.manufacturer,cost_in_credits:e.cost_in_credits,length:e.length,max_atmosphering_speed:e.max_atmosphering_speed,crew:e.crew,passengers:e.passengers,cargo_capacity:e.cargo_capacity,consumables:e.consumables,hyperdrive_rating:e.hyperdrive_rating,MGLT:e.MGLT,starship_class:e.starship_class,pilots:e.pilots,films:e.films,created:e.created,edited:e.edited,url:e.url,pic:v}})}loadNextPage(){let s=t(this,i).call(this).nextPage;s&&this.loadStarshipsPage(s)}loadPreviousPage(){let s=t(this,i).call(this).previousPage;s&&this.loadStarshipsPage(s)}loadStarshipDetails(s){let r=t(this,a).call(this).starshipsList.find(e=>e.id===s);r&&t(this,o).set({selectedStarship:r})}getPages(){let s=Math.ceil(t(this,i).call(this).count/10);return Array.from({length:s},(r,e)=>e+1)}getCurrentPageNumber(){return this.currentPageNumber}setCurrentPageNumber(s){this.currentPageNumber=s}loadInitialPage(){this.loadStarshipsPage("https://swapi.dev/api/starships/?page=1&format=json"),this.currentPageNumber=1,this.setCurrentPageNumber(1)}};i=new WeakMap,o=new WeakMap,a=new WeakMap,n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=f({token:n,factory:n.\u0275fac,providedIn:"root"});let l=n;return l})();export{j as a};
